{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 23, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/lib/firebase/admin.ts"],"sourcesContent":["\nimport admin from 'firebase-admin';\nimport fs from 'fs';\nimport path from 'path';\n\n// Attempt to load service account credentials\n// Try environment variable first, then local file\n\nlet serviceAccountJson: string | null = null;\nlet initializedVia: string | null = null; // Keep track of how it was initialized\n\n// Method 1: Environment Variable (Recommended for deployment)\nif (process.env.FIREBASE_SERVICE_ACCOUNT_KEY) {\n  serviceAccountJson = process.env.FIREBASE_SERVICE_ACCOUNT_KEY;\n  initializedVia = 'environment variable';\n  console.log(\"Firebase Admin SDK: Attempting initialization via environment variable.\");\n} else {\n   console.log(\"Firebase Admin SDK: FIREBASE_SERVICE_ACCOUNT_KEY environment variable not found.\");\n}\n\n\n// Method 2: Local File (Easier for local dev, ensure it's gitignored)\nif (!serviceAccountJson) {\n   const serviceAccountPath = path.resolve('./serviceAccountKey.json'); // Use path.resolve for absolute path\n    console.log(`Firebase Admin SDK: Checking for local file at ${serviceAccountPath}...`);\n  try {\n    if (fs.existsSync(serviceAccountPath)) {\n      serviceAccountJson = fs.readFileSync(serviceAccountPath, 'utf8');\n      initializedVia = 'local file (serviceAccountKey.json)';\n       console.log(\"Firebase Admin SDK: Found and using local serviceAccountKey.json file.\");\n    } else {\n       console.log(\"Firebase Admin SDK: Local serviceAccountKey.json file not found.\");\n    }\n  } catch (error: any) {\n    console.error(`Firebase Admin SDK: Error reading local serviceAccountKey.json: ${error.message}`);\n    // Proceed without local file if reading fails\n    serviceAccountJson = null; // Ensure it's null if read failed\n  }\n}\n\n\n// Function to initialize Firebase Admin SDK\nconst initializeFirebaseAdmin = (): admin.auth.Auth | null => {\n  // Check if the SDK is already initialized to prevent re-initialization errors\n  if (admin.apps.length > 0) {\n    // console.log(\"Firebase Admin SDK already initialized.\"); // Reduce console noise\n    return admin.auth(); // Return existing auth instance\n  }\n\n  // Check if we found credentials\n  if (!serviceAccountJson) {\n     console.error(\"Firebase Admin SDK: Initialization failed - No service account credentials found (neither env var nor local file).\");\n     return null;\n  }\n\n   let serviceAccount;\n   try {\n        serviceAccount = JSON.parse(serviceAccountJson);\n        // Basic validation of parsed content\n        if (!serviceAccount.project_id || !serviceAccount.private_key || !serviceAccount.client_email) {\n            console.error(\"Firebase Admin SDK: Parsed service account JSON is missing required fields (project_id, private_key, client_email).\");\n            return null;\n        }\n   } catch (error: any) {\n       console.error(`Firebase Admin SDK: Failed to parse service account JSON from ${initializedVia}: ${error.message}`);\n       return null;\n   }\n\n\n  console.log(`Firebase Admin SDK: Attempting initialization via ${initializedVia}...`);\n  try {\n    admin.initializeApp({\n      credential: admin.credential.cert(serviceAccount),\n    });\n    console.log('Firebase Admin SDK Initialized successfully.'); // Simplified confirmation\n  } catch (error: any) {\n    // Catch potential errors during the admin.initializeApp call itself\n     console.error(`Firebase Admin SDK: Unexpected error during initialization via ${initializedVia}: ${error.message}`);\n     // Log the structure of the service account (excluding private key) for debugging if needed\n     // console.error(\"Service Account structure (check fields):\", { projectId: serviceAccount.project_id, clientEmail: serviceAccount.client_email });\n     return null; // Explicitly return null on initialization error\n  }\n\n  // --- Check Initialization Status ---\n  if (admin.apps.length > 0) {\n      // Remove the reference to the undefined variable 'initializedVia' here\n      console.log(`Firebase Admin SDK initialization confirmed.`);\n      return admin.auth();\n  }\n\n  // --- Initialization Failed (Should theoretically not be reached if above logic is sound) ---\n  console.error('CRITICAL: Firebase Admin SDK initialization failed after attempting credential loading.');\n  return null; // Indicate failure\n};\n\n// Initialize and attempt to get the adminAuth instance\nconst adminAuthInstance = initializeFirebaseAdmin();\n\n// Export the instance only if initialization was successful.\n// Throwing an error makes the initialization failure immediate and clear during server startup/request.\nif (!adminAuthInstance) {\n   // Ensure this error message clearly indicates the user needs to check configuration.\n   throw new Error(\"Firebase Admin SDK could not be initialized. Check server logs for details. Common causes are missing or invalid service account credentials (env var or local file). Please verify your setup according to the README.md.\");\n}\n\nexport const adminAuth = adminAuthInstance;\n// Export other admin services if needed, e.g., admin.firestore()\n\n"],"names":[],"mappings":";;;AACA;AACA;AACA;;;;AAEA,8CAA8C;AAC9C,kDAAkD;AAElD,IAAI,qBAAoC;AACxC,IAAI,iBAAgC,MAAM,uCAAuC;AAEjF,8DAA8D;AAC9D,IAAI,QAAQ,GAAG,CAAC,4BAA4B,EAAE;IAC5C,qBAAqB,QAAQ,GAAG,CAAC,4BAA4B;IAC7D,iBAAiB;IACjB,QAAQ,GAAG,CAAC;AACd,OAAO;IACJ,QAAQ,GAAG,CAAC;AACf;AAGA,sEAAsE;AACtE,IAAI,CAAC,oBAAoB;IACtB,MAAM,qBAAqB,iGAAA,CAAA,UAAI,CAAC,OAAO,CAAC,6BAA6B,qCAAqC;IACzG,QAAQ,GAAG,CAAC,CAAC,+CAA+C,EAAE,mBAAmB,GAAG,CAAC;IACvF,IAAI;QACF,IAAI,6FAAA,CAAA,UAAE,CAAC,UAAU,CAAC,qBAAqB;YACrC,qBAAqB,6FAAA,CAAA,UAAE,CAAC,YAAY,CAAC,oBAAoB;YACzD,iBAAiB;YAChB,QAAQ,GAAG,CAAC;QACf,OAAO;YACJ,QAAQ,GAAG,CAAC;QACf;IACF,EAAE,OAAO,OAAY;QACnB,QAAQ,KAAK,CAAC,CAAC,gEAAgE,EAAE,MAAM,OAAO,EAAE;QAChG,8CAA8C;QAC9C,qBAAqB,MAAM,kCAAkC;IAC/D;AACF;AAGA,4CAA4C;AAC5C,MAAM,0BAA0B;IAC9B,8EAA8E;IAC9E,IAAI,2HAAA,CAAA,UAAK,CAAC,IAAI,CAAC,MAAM,GAAG,GAAG;QACzB,kFAAkF;QAClF,OAAO,2HAAA,CAAA,UAAK,CAAC,IAAI,IAAI,gCAAgC;IACvD;IAEA,gCAAgC;IAChC,IAAI,CAAC,oBAAoB;QACtB,QAAQ,KAAK,CAAC;QACd,OAAO;IACV;IAEC,IAAI;IACJ,IAAI;QACC,iBAAiB,KAAK,KAAK,CAAC;QAC5B,qCAAqC;QACrC,IAAI,CAAC,eAAe,UAAU,IAAI,CAAC,eAAe,WAAW,IAAI,CAAC,eAAe,YAAY,EAAE;YAC3F,QAAQ,KAAK,CAAC;YACd,OAAO;QACX;IACL,EAAE,OAAO,OAAY;QACjB,QAAQ,KAAK,CAAC,CAAC,8DAA8D,EAAE,eAAe,EAAE,EAAE,MAAM,OAAO,EAAE;QACjH,OAAO;IACX;IAGD,QAAQ,GAAG,CAAC,CAAC,kDAAkD,EAAE,eAAe,GAAG,CAAC;IACpF,IAAI;QACF,2HAAA,CAAA,UAAK,CAAC,aAAa,CAAC;YAClB,YAAY,2HAAA,CAAA,UAAK,CAAC,UAAU,CAAC,IAAI,CAAC;QACpC;QACA,QAAQ,GAAG,CAAC,iDAAiD,0BAA0B;IACzF,EAAE,OAAO,OAAY;QACnB,oEAAoE;QACnE,QAAQ,KAAK,CAAC,CAAC,+DAA+D,EAAE,eAAe,EAAE,EAAE,MAAM,OAAO,EAAE;QAClH,2FAA2F;QAC3F,kJAAkJ;QAClJ,OAAO,MAAM,iDAAiD;IACjE;IAEA,sCAAsC;IACtC,IAAI,2HAAA,CAAA,UAAK,CAAC,IAAI,CAAC,MAAM,GAAG,GAAG;QACvB,uEAAuE;QACvE,QAAQ,GAAG,CAAC,CAAC,4CAA4C,CAAC;QAC1D,OAAO,2HAAA,CAAA,UAAK,CAAC,IAAI;IACrB;IAEA,8FAA8F;IAC9F,QAAQ,KAAK,CAAC;IACd,OAAO,MAAM,mBAAmB;AAClC;AAEA,uDAAuD;AACvD,MAAM,oBAAoB;AAE1B,6DAA6D;AAC7D,wGAAwG;AACxG,IAAI,CAAC,mBAAmB;IACrB,qFAAqF;IACrF,MAAM,IAAI,MAAM;AACnB;AAEO,MAAM,YAAY,mBACzB,iEAAiE","debugId":null}},
    {"offset": {"line": 124, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/actions/list-users.ts"],"sourcesContent":["\n'use server';\n\nimport { adminAuth } from '@/lib/firebase/admin';\nimport type { UserRecord } from 'firebase-admin/auth';\n\n// Define return type\ninterface ListUsersResult {\n  success: boolean;\n  message: string;\n  users?: {\n    uid: string;\n    email: string | undefined; // Email might be undefined\n    creationTime: string;\n    lastSignInTime: string;\n    disabled: boolean;\n    isAdmin: boolean; // Added isAdmin flag\n  }[];\n}\n\nexport async function listUsersAction(): Promise<ListUsersResult> {\n  // --- Authentication/Authorization Check ---\n  // Similar to create-user action, ensure the caller is an admin.\n  // This is crucial for security. For now, we assume page-level protection.\n  // In a real app, implement robust server-side auth checks here.\n  // --- End Auth Check ---\n\n  try {\n    const listUsersResult = await adminAuth.listUsers(1000); // List up to 1000 users\n\n    const users = listUsersResult.users.map((userRecord: UserRecord) => {\n        // Check for the admin custom claim\n        const isAdmin = !!userRecord.customClaims?.admin; // Check if customClaims exist and admin is true\n\n        return {\n            uid: userRecord.uid,\n            email: userRecord.email,\n            creationTime: userRecord.metadata.creationTime,\n            lastSignInTime: userRecord.metadata.lastSignInTime,\n            disabled: userRecord.disabled,\n            isAdmin: isAdmin,\n        };\n    });\n\n    // Optionally sort users, e.g., by creation time or email\n    users.sort((a, b) => new Date(b.creationTime).getTime() - new Date(a.creationTime).getTime());\n\n\n    return {\n      success: true,\n      message: `Successfully fetched ${users.length} users.`,\n      users: users,\n    };\n  } catch (error: any) {\n    console.error('Error listing users:', error);\n    return { success: false, message: `Erreur lors de la récupération des utilisateurs: ${error.message}` };\n  }\n}\n"],"names":[],"mappings":";;;;;AAGA;;;;;AAiBO,eAAe,uCAAa,GAAb;IACpB,6CAA6C;IAC7C,gEAAgE;IAChE,0EAA0E;IAC1E,gEAAgE;IAChE,yBAAyB;IAEzB,IAAI;QACF,MAAM,kBAAkB,MAAM,+HAAA,CAAA,YAAS,CAAC,SAAS,CAAC,OAAO,wBAAwB;QAEjF,MAAM,QAAQ,gBAAgB,KAAK,CAAC,GAAG,CAAC,CAAC;YACrC,mCAAmC;YACnC,MAAM,UAAU,CAAC,CAAC,WAAW,YAAY,EAAE,OAAO,gDAAgD;YAElG,OAAO;gBACH,KAAK,WAAW,GAAG;gBACnB,OAAO,WAAW,KAAK;gBACvB,cAAc,WAAW,QAAQ,CAAC,YAAY;gBAC9C,gBAAgB,WAAW,QAAQ,CAAC,cAAc;gBAClD,UAAU,WAAW,QAAQ;gBAC7B,SAAS;YACb;QACJ;QAEA,yDAAyD;QACzD,MAAM,IAAI,CAAC,CAAC,GAAG,IAAM,IAAI,KAAK,EAAE,YAAY,EAAE,OAAO,KAAK,IAAI,KAAK,EAAE,YAAY,EAAE,OAAO;QAG1F,OAAO;YACL,SAAS;YACT,SAAS,CAAC,qBAAqB,EAAE,MAAM,MAAM,CAAC,OAAO,CAAC;YACtD,OAAO;QACT;IACF,EAAE,OAAO,OAAY;QACnB,QAAQ,KAAK,CAAC,wBAAwB;QACtC,OAAO;YAAE,SAAS;YAAO,SAAS,CAAC,iDAAiD,EAAE,MAAM,OAAO,EAAE;QAAC;IACxG;AACF;;;IArCsB;;AAAA,+OAAA","debugId":null}},
    {"offset": {"line": 180, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/actions/set-user-role.ts"],"sourcesContent":["\n'use server';\n\nimport { adminAuth } from '@/lib/firebase/admin';\nimport { z } from 'zod';\n\n// Define input schema for validation\nconst SetUserRoleInputSchema = z.object({\n  uid: z.string().min(1, { message: \"UID utilisateur requis.\" }),\n  isAdmin: z.boolean(),\n});\n\n// Define return type\ninterface SetUserRoleResult {\n  success: boolean;\n  message: string;\n}\n\nexport async function setUserRoleAction(uid: string, isAdmin: boolean): Promise<SetUserRoleResult> {\n    // --- Authorization Check ---\n    // Ensure the caller is an authenticated admin. This is CRUCIAL.\n    // For simplicity, we assume this check happens in the calling context (e.g., AdminPage)\n    // A more robust solution involves verifying an admin token here.\n    // --- End Auth Check ---\n\n    // Validate input (even though it comes from internal function call, good practice)\n    const validationResult = SetUserRoleInputSchema.safeParse({ uid, isAdmin });\n    if (!validationResult.success) {\n        const errorMessages = validationResult.error.errors.map(e => e.message).join(', ');\n        return { success: false, message: `Validation échouée: ${errorMessages}` };\n    }\n\n    // Prevent modifying the primary admin defined by environment variable\n    if (process.env.NEXT_PUBLIC_ADMIN_UID && uid === process.env.NEXT_PUBLIC_ADMIN_UID) {\n        return { success: false, message: \"Modification du rôle de l'administrateur principal non autorisée.\" };\n    }\n\n    try {\n        // Set custom claims\n        await adminAuth.setCustomUserClaims(uid, { admin: isAdmin });\n        console.log(`Successfully set admin claim to ${isAdmin} for user: ${uid}`);\n\n        // Optionally, force token refresh for the affected user if they are currently logged in\n        // This requires more complex logic, potentially involving Firestore or Realtime Database\n        // await adminAuth.revokeRefreshTokens(uid);\n\n        return {\n            success: true,\n            message: `Rôle admin ${isAdmin ? 'défini' : 'retiré'} avec succès pour l'utilisateur ${uid}.`,\n        };\n    } catch (error: any) {\n        console.error(`Error setting custom claims for user ${uid}:`, error);\n        let errorMessage = \"Erreur lors de la modification du rôle de l'utilisateur.\";\n        // Add more specific error handling based on Firebase Admin SDK errors if needed\n        if (error.code === 'auth/user-not-found') {\n            errorMessage = `Utilisateur avec UID ${uid} non trouvé.`;\n        }\n        return { success: false, message: errorMessage };\n    }\n}\n"],"names":[],"mappings":";;;;;AAGA;AACA;;;;;;AAEA,qCAAqC;AACrC,MAAM,yBAAyB,oIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;IACtC,KAAK,oIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,GAAG,CAAC,GAAG;QAAE,SAAS;IAA0B;IAC5D,SAAS,oIAAA,CAAA,IAAC,CAAC,OAAO;AACpB;AAQO,eAAe,uCAAe,GAAf,kBAAkB,GAAW,EAAE,OAAgB;IACjE,8BAA8B;IAC9B,gEAAgE;IAChE,wFAAwF;IACxF,iEAAiE;IACjE,yBAAyB;IAEzB,mFAAmF;IACnF,MAAM,mBAAmB,uBAAuB,SAAS,CAAC;QAAE;QAAK;IAAQ;IACzE,IAAI,CAAC,iBAAiB,OAAO,EAAE;QAC3B,MAAM,gBAAgB,iBAAiB,KAAK,CAAC,MAAM,CAAC,GAAG,CAAC,CAAA,IAAK,EAAE,OAAO,EAAE,IAAI,CAAC;QAC7E,OAAO;YAAE,SAAS;YAAO,SAAS,CAAC,oBAAoB,EAAE,eAAe;QAAC;IAC7E;IAEA,sEAAsE;IACtE,IAAI,oEAAqC,0EAA2C;QAChF,OAAO;YAAE,SAAS;YAAO,SAAS;QAAoE;IAC1G;IAEA,IAAI;QACA,oBAAoB;QACpB,MAAM,+HAAA,CAAA,YAAS,CAAC,mBAAmB,CAAC,KAAK;YAAE,OAAO;QAAQ;QAC1D,QAAQ,GAAG,CAAC,CAAC,gCAAgC,EAAE,QAAQ,WAAW,EAAE,KAAK;QAEzE,wFAAwF;QACxF,yFAAyF;QACzF,4CAA4C;QAE5C,OAAO;YACH,SAAS;YACT,SAAS,CAAC,WAAW,EAAE,UAAU,WAAW,SAAS,gCAAgC,EAAE,IAAI,CAAC,CAAC;QACjG;IACJ,EAAE,OAAO,OAAY;QACjB,QAAQ,KAAK,CAAC,CAAC,qCAAqC,EAAE,IAAI,CAAC,CAAC,EAAE;QAC9D,IAAI,eAAe;QACnB,gFAAgF;QAChF,IAAI,MAAM,IAAI,KAAK,uBAAuB;YACtC,eAAe,CAAC,qBAAqB,EAAE,IAAI,YAAY,CAAC;QAC5D;QACA,OAAO;YAAE,SAAS;YAAO,SAAS;QAAa;IACnD;AACJ;;;IAzCsB;;AAAA,+OAAA","debugId":null}},
    {"offset": {"line": 261, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/actions/toggle-user-status.ts"],"sourcesContent":["\n'use server';\n\nimport { adminAuth } from '@/lib/firebase/admin';\nimport { z } from 'zod';\n\n// Define input schema for validation\nconst ToggleUserStatusInputSchema = z.object({\n  uid: z.string().min(1, { message: \"UID utilisateur requis.\" }),\n  disable: z.boolean(), // true to disable, false to enable\n});\n\n// Define return type\ninterface ToggleUserStatusResult {\n  success: boolean;\n  message: string;\n}\n\nexport async function toggleUserStatusAction(uid: string, disable: boolean): Promise<ToggleUserStatusResult> {\n    // --- Authorization Check ---\n    // Ensure the caller is an authenticated admin.\n    // --- End Auth Check ---\n\n    // Validate input\n    const validationResult = ToggleUserStatusInputSchema.safeParse({ uid, disable });\n    if (!validationResult.success) {\n        const errorMessages = validationResult.error.errors.map(e => e.message).join(', ');\n        return { success: false, message: `Validation échouée: ${errorMessages}` };\n    }\n\n     // Prevent disabling the primary admin defined by environment variable\n    if (disable && process.env.NEXT_PUBLIC_ADMIN_UID && uid === process.env.NEXT_PUBLIC_ADMIN_UID) {\n        return { success: false, message: \"Désactivation de l'administrateur principal non autorisée.\" };\n    }\n\n    try {\n        // Update user status\n        await adminAuth.updateUser(uid, { disabled: disable });\n        console.log(`Successfully ${disable ? 'disabled' : 'enabled'} user: ${uid}`);\n\n        return {\n            success: true,\n            message: `Utilisateur ${disable ? 'désactivé' : 'activé'} avec succès.`,\n        };\n    } catch (error: any) {\n        console.error(`Error updating status for user ${uid}:`, error);\n        let errorMessage = \"Erreur lors de la modification du statut de l'utilisateur.\";\n        if (error.code === 'auth/user-not-found') {\n            errorMessage = `Utilisateur avec UID ${uid} non trouvé.`;\n        }\n        return { success: false, message: errorMessage };\n    }\n}\n"],"names":[],"mappings":";;;;;AAGA;AACA;;;;;;AAEA,qCAAqC;AACrC,MAAM,8BAA8B,oIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;IAC3C,KAAK,oIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,GAAG,CAAC,GAAG;QAAE,SAAS;IAA0B;IAC5D,SAAS,oIAAA,CAAA,IAAC,CAAC,OAAO;AACpB;AAQO,eAAe,uCAAoB,GAApB,uBAAuB,GAAW,EAAE,OAAgB;IACtE,8BAA8B;IAC9B,+CAA+C;IAC/C,yBAAyB;IAEzB,iBAAiB;IACjB,MAAM,mBAAmB,4BAA4B,SAAS,CAAC;QAAE;QAAK;IAAQ;IAC9E,IAAI,CAAC,iBAAiB,OAAO,EAAE;QAC3B,MAAM,gBAAgB,iBAAiB,KAAK,CAAC,MAAM,CAAC,GAAG,CAAC,CAAA,IAAK,EAAE,OAAO,EAAE,IAAI,CAAC;QAC7E,OAAO;YAAE,SAAS;YAAO,SAAS,CAAC,oBAAoB,EAAE,eAAe;QAAC;IAC7E;IAEC,sEAAsE;IACvE,IAAI,+EAAgD,0EAA2C;QAC3F,OAAO;YAAE,SAAS;YAAO,SAAS;QAA6D;IACnG;IAEA,IAAI;QACA,qBAAqB;QACrB,MAAM,+HAAA,CAAA,YAAS,CAAC,UAAU,CAAC,KAAK;YAAE,UAAU;QAAQ;QACpD,QAAQ,GAAG,CAAC,CAAC,aAAa,EAAE,UAAU,aAAa,UAAU,OAAO,EAAE,KAAK;QAE3E,OAAO;YACH,SAAS;YACT,SAAS,CAAC,YAAY,EAAE,UAAU,cAAc,SAAS,aAAa,CAAC;QAC3E;IACJ,EAAE,OAAO,OAAY;QACjB,QAAQ,KAAK,CAAC,CAAC,+BAA+B,EAAE,IAAI,CAAC,CAAC,EAAE;QACxD,IAAI,eAAe;QACnB,IAAI,MAAM,IAAI,KAAK,uBAAuB;YACtC,eAAe,CAAC,qBAAqB,EAAE,IAAI,YAAY,CAAC;QAC5D;QACA,OAAO;YAAE,SAAS;YAAO,SAAS;QAAa;IACnD;AACJ;;;IAlCsB;;AAAA,+OAAA","debugId":null}},
    {"offset": {"line": 336, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/actions/delete-user.ts"],"sourcesContent":["\n'use server';\n\nimport { adminAuth } from '@/lib/firebase/admin';\nimport { z } from 'zod';\n\n// Define input schema for validation\nconst DeleteUserInputSchema = z.object({\n  uid: z.string().min(1, { message: \"UID utilisateur requis.\" }),\n});\n\n// Define return type\ninterface DeleteUserResult {\n  success: boolean;\n  message: string;\n}\n\nexport async function deleteUserAction(uid: string): Promise<DeleteUserResult> {\n    // --- Authorization Check ---\n    // Ensure the caller is an authenticated admin.\n    // --- End Auth Check ---\n\n    // Validate input\n    const validationResult = DeleteUserInputSchema.safeParse({ uid });\n    if (!validationResult.success) {\n        const errorMessages = validationResult.error.errors.map(e => e.message).join(', ');\n        return { success: false, message: `Validation échouée: ${errorMessages}` };\n    }\n\n     // Prevent deleting the primary admin defined by environment variable\n    if (process.env.NEXT_PUBLIC_ADMIN_UID && uid === process.env.NEXT_PUBLIC_ADMIN_UID) {\n        return { success: false, message: \"Suppression de l'administrateur principal non autorisée.\" };\n    }\n\n\n    try {\n        // Delete user\n        await adminAuth.deleteUser(uid);\n        console.log(`Successfully deleted user: ${uid}`);\n\n        return {\n            success: true,\n            message: `Utilisateur supprimé avec succès.`,\n        };\n    } catch (error: any) {\n        console.error(`Error deleting user ${uid}:`, error);\n        let errorMessage = \"Erreur lors de la suppression de l'utilisateur.\";\n        if (error.code === 'auth/user-not-found') {\n            errorMessage = `Utilisateur avec UID ${uid} non trouvé.`;\n        }\n        // Add more specific error handling based on Firebase Admin SDK errors if needed\n        return { success: false, message: errorMessage };\n    }\n}\n"],"names":[],"mappings":";;;;;AAGA;AACA;;;;;;AAEA,qCAAqC;AACrC,MAAM,wBAAwB,oIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;IACrC,KAAK,oIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,GAAG,CAAC,GAAG;QAAE,SAAS;IAA0B;AAC9D;AAQO,eAAe,uCAAc,GAAd,iBAAiB,GAAW;IAC9C,8BAA8B;IAC9B,+CAA+C;IAC/C,yBAAyB;IAEzB,iBAAiB;IACjB,MAAM,mBAAmB,sBAAsB,SAAS,CAAC;QAAE;IAAI;IAC/D,IAAI,CAAC,iBAAiB,OAAO,EAAE;QAC3B,MAAM,gBAAgB,iBAAiB,KAAK,CAAC,MAAM,CAAC,GAAG,CAAC,CAAA,IAAK,EAAE,OAAO,EAAE,IAAI,CAAC;QAC7E,OAAO;YAAE,SAAS;YAAO,SAAS,CAAC,oBAAoB,EAAE,eAAe;QAAC;IAC7E;IAEC,qEAAqE;IACtE,IAAI,oEAAqC,0EAA2C;QAChF,OAAO;YAAE,SAAS;YAAO,SAAS;QAA2D;IACjG;IAGA,IAAI;QACA,cAAc;QACd,MAAM,+HAAA,CAAA,YAAS,CAAC,UAAU,CAAC;QAC3B,QAAQ,GAAG,CAAC,CAAC,2BAA2B,EAAE,KAAK;QAE/C,OAAO;YACH,SAAS;YACT,SAAS,CAAC,iCAAiC,CAAC;QAChD;IACJ,EAAE,OAAO,OAAY;QACjB,QAAQ,KAAK,CAAC,CAAC,oBAAoB,EAAE,IAAI,CAAC,CAAC,EAAE;QAC7C,IAAI,eAAe;QACnB,IAAI,MAAM,IAAI,KAAK,uBAAuB;YACtC,eAAe,CAAC,qBAAqB,EAAE,IAAI,YAAY,CAAC;QAC5D;QACA,gFAAgF;QAChF,OAAO;YAAE,SAAS;YAAO,SAAS;QAAa;IACnD;AACJ;;;IApCsB;;AAAA,+OAAA","debugId":null}},
    {"offset": {"line": 408, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 480, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/admin/page.tsx/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/app/admin/page.tsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/app/admin/page.tsx <module evaluation>\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;AAAA;;uCACe,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACjC;IAAa,MAAM,IAAI,MAAM;AAA0R,GACvT,wDACA","debugId":null}},
    {"offset": {"line": 494, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/admin/page.tsx/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/app/admin/page.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/app/admin/page.tsx\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;AAAA;;uCACe,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACjC;IAAa,MAAM,IAAI,MAAM;AAAsQ,GACnS,oCACA","debugId":null}},
    {"offset": {"line": 508, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}}]
}